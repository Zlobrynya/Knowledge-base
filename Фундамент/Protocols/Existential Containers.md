Для хранения экземпляров протокольного типа в памяти формулируется следующий контейнер, который занимает 5 машинных слов

| value buffer     |                                     |
| ---------------- | ----------------------------------- |
| **value buffer** |                                     |
| **value buffer** |                                     |
| **vwt**          | Указатель на Value Witness Table    |
| **pwt**          | Указатель на Protocol Witness Table |
### Value buffer

Три машинных слова для хранения экземпляра, если экземпляр помещается в 3 слова, он там и хранится, если нет то в куче выделяется памяти и в value buffer вставляется ссылка на память.

### Value Witness Table (vwt)

Таблица жизненного цикла, содержит в себе четыре метода: 
- allocate -> Решает где будет хранится, в буфере или в памяти, а так же занимается выделением в памяти кучи.
- copy -> поместит содержимое объекта в соответствующее место
- destruct -> убивает все счетчики ссылок 
- deallocate -> освобождает память

### Protocol Witness Table (pwt)

Таблица с методами протокола с указателями на место в памяти с реализацией этих методов.




2. Производительность
3. Оптимизации в Swift 5.6+


https://github.com/swiftlang/swift-evolution/blob/main/proposals/0309-unlock-existential-types-for-all-protocols.md
https://habr.com/ru/articles/474558/